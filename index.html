<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PM Window Guard</title>
    <link
      href="bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="PMTabsGuard.js"></script>
    <style>
      body {
        background: #000;
      }
    </style>
  </head>
  <body>
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-8">
          <div class="card shadow-lg border-0">
            <div class="card-body p-4 p-md-5">
              <h1 class="h3 mb-3">Prevent Multiple Tabs Guard</h1>
              <p class="text-secondary mb-1">This page only allows one active window/tab.</p>
              <p class="text-secondary mb-3">Open a second tab/window to see the lock prevent access.</p>
              <div class="alert alert-warning mb-3" id="status" role="status">
                Checking for an existing session...
              </div>
              <div class="alert alert-danger d-none" id="blocked" role="alert">
                <strong>Access blocked.</strong> There's an active window already running.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
const statusEl = document.getElementById("status");
const blockedEl = document.getElementById("blocked");
const guard = new PMTabsGuard({
  //Optional: override keys or timing
  //heartbeatMs: 2000, 
  //Callback: What happens when the status text updates?
  onStatus: (text) => {
    console.log(`[System]: ${text}`);
    if(statusEl) statusEl.textContent = text;
  },
  //What happens when a multiple window is detected?
  onBlock: () => {
    if(blockedEl) blockedEl.classList.remove("d-none");
  //Disable buttons or blur the screen here
  }
});

//Start guarding
guard.start();
    </script>
  </body>
</html>
